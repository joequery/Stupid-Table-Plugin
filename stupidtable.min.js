(function(g){g.fn.stupidtable=function(h){return this.each(function(){var i=g(this);h=h||{};h=g.extend({},{"int":function(c,f){return parseInt(c,10)-parseInt(f,10)},"float":function(c,f){return parseFloat(c)-parseFloat(f)},string:function(c,f){return c<f?-1:c>f?1:0}},h);i.on("click","th",function(){var c=i.children("tbody").children("tr"),f=g(this),k=f.index(),d=f.data("sort")||null;if(d){d=h[d];column=[];c.each(function(c,b){var a=g(b).children().eq(k),a=a.data("sort-value")||a.text();column.push(a)});
var b=column,a=b.slice(0),e=b.slice(0).reverse(),b=b.slice(0).sort(d);if(a&&b&&!(a<b||b<a)||e&&b&&!(e<b||b<e)){column.reverse();d=[];for(a=column.length-1;0<=a;a--)d.push(a)}else{for(var a=column,d=a.slice(0).sort(d),e=[],j=b=0;j<a.length;j++){for(b=g.inArray(a[j],d);-1!=g.inArray(b,e);)b++;e.push(b)}d=e}a=c.slice(0);for(e=0;e<d.length;e++)newIndex=d[e],a[newIndex]=c[e];c=g(a);i.children("tbody").append(c);c="asc"===f.data("sort-dir")?"desc":"asc";f.data("sort-dir",c);i.trigger("aftertablesort",{column:k,
direction:c})}})})}})(jQuery);