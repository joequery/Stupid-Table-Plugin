(function(g){g.fn.stupidtable=function(l){return this.each(function(){var j=g(this);l=l||{};l=g.extend({},{"int":function(b,a){return parseInt(b,10)-parseInt(a,10)},"float":function(b,a){return parseFloat(b)-parseFloat(a)},string:function(b,a){return b<a?-1:b>a?1:0}},l);j.on("click","th",function(){var b=j.children("tbody").children("tr"),a=g(this),m=0;j.find("th").slice(0,a.index()).each(function(){var a=g(this).attr("colspan")||1;m+=parseInt(a,10)});var e=a.data("sort")||null;if(e){var c=l[e],h=
[];b.each(function(a,c){var b=g(c).children().eq(m),d=b.data("sort-value"),b="undefined"!==typeof d?d:b.text();h.push(b)});var e=[],f=h.slice(0),d=h.slice(0).reverse(),k=h.slice(0).sort(c);if((f&&k&&!(f<k||k<f)||d&&k&&!(d<k||k<d))&&null!==a.data("sort-dir")){h.reverse();for(c=h.length-1;0<=c;c--)e.push(c)}else{e=h.slice(0).sort(c);c=[];for(d=f=0;d<h.length;d++){for(f=g.inArray(h[d],e);-1!=g.inArray(f,c);)f++;c.push(f)}e=c}c="asc"===a.data("sort-dir")?"desc":"asc";j.find("th").data("sort-dir",null).removeClass("sorting-desc sorting-asc");
a.data("sort-dir",c).addClass("sorting-"+c);j.trigger("beforetablesort",{column:m,direction:c});a=e;e=b.slice(0);for(d=f=0;d<a.length;d++)f=a[d],e[f]=b[d];b=g(e);j.children("tbody").append(b);j.trigger("aftertablesort",{column:m,direction:c})}})})}})(jQuery);