!function(t){t.fn.stupidtable=function(a){return this.each(function(){var r=t(this);a=a||{},a=t.extend({},t.fn.stupidtable.default_sort_fns,a),r.data("sortFns",a),r.on("click.stupidtable","thead th",function(){t(this).stupidsort()})})},t.fn.stupidsort=function(a){var r=t(this),e=0,n=t.fn.stupidtable.dir,s=r.closest("table"),i=r.data("sort")||null;if(null!==i&&!r.hasClass("sort-disabled")){r.parents("tr").find("th").slice(0,t(this).index()).each(function(){var a=t(this).attr("colspan")||1;e+=parseInt(a,10)});var o;return 1==arguments.length?o=a:(o=a||r.data("sort-default")||n.ASC,r.data("sort-dir")&&(o=r.data("sort-dir")===n.ASC?n.DESC:n.ASC)),s.trigger("beforetablesort",{column:e,direction:o}),s.css("display"),setTimeout(function(){var a=[],d=s.data("sortFns"),u=d[i],l=s.children("tbody").children("tr");l.each(function(r,n){var s=t(n).children().eq(e),i=s.data("sort-value");if("undefined"==typeof i){var o=s.text();s.data("sort-value",o),i=o}a.push([i,n])});var c=s.attr("prevent-sort-equal");if("undefined"!=typeof c&&c!==!1){var f=t(a).get(0)[0],p=!0;if(t(a).each(function(t,a){p=p&&a[0]===f}),p)return void r.addClass("sort-disabled")}a.sort(function(t,a){return u(t[0],a[0])}),o!=n.ASC&&a.reverse(),l=t.map(a,function(t){return t[1]}),s.children("tbody").append(l),s.find("th").data("sort-dir",null).removeClass("sorting-desc sorting-asc"),r.data("sort-dir",o).addClass("sorting-"+o),s.trigger("aftertablesort",{column:e,direction:o}),s.css("display")},10),r}},t.fn.updateSortVal=function(a){var r=t(this);return r.is("[data-sort-value]")&&r.attr("data-sort-value",a),r.data("sort-value",a),r},t.fn.stupidtable.dir={ASC:"asc",DESC:"desc"},t.fn.stupidtable.default_sort_fns={"int":function(t,a){return parseInt(t,10)-parseInt(a,10)},"float":function(t,a){return parseFloat(t)-parseFloat(a)},string:function(t,a){return t.localeCompare(a)},"string-ins":function(t,a){return t=t.toLocaleLowerCase(),a=a.toLocaleLowerCase(),t.localeCompare(a)}}}(jQuery);