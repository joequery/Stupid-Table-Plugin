(function(g){g.fn.stupidtable=function(j){return this.each(function(){var k=g(this);j=j||{};j=g.extend({},{"int":function(d,b){return parseInt(d,10)-parseInt(b,10)},"float":function(d,b){return parseFloat(d)-parseFloat(b)},string:function(d,b){return d<b?-1:d>b?1:0}},j);k.on("click","th",function(){var d=k.children("tbody").children("tr"),b=g(this),l=b.index(),e=b.data("sort")||null;if(e){var c=j[e],f=[];d.each(function(b,c){var a=g(c).children().eq(l),a=a.data("sort-value")||a.text();f.push(a)});
var e=[],a=f.slice(0),h=f.slice(0).reverse(),i=f.slice(0).sort(c);if((a&&i&&!(a<i||i<a)||h&&i&&!(h<i||i<h))&&null!==b.data("sort-dir")){f.reverse();for(c=f.length-1;0<=c;c--)e.push(c)}else{e=f.slice(0).sort(c);c=[];for(h=a=0;h<f.length;h++){for(a=g.inArray(f[h],e);-1!=g.inArray(a,c);)a++;c.push(a)}e=c}c="asc"===b.data("sort-dir")?"desc":"asc";b.siblings("th").data("sort-dir",null);b.data("sort-dir",c);b=e;e=d.slice(0);for(a=0;a<b.length;a++)newIndex=b[a],e[newIndex]=d[a];d=g(e);k.children("tbody").append(d);
k.trigger("aftertablesort",{column:l,direction:c})}})})}})(jQuery);