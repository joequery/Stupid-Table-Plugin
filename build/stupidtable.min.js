(function(){$(function(){return $.fn.stupidtable=function(a){return this.each(function(){var b,c,d,e,f,g;return b=$(this),d=b.data("default-sort-th"),e=d?b.find("th#"+d):null,a=a||{},a=$.extend({},$.fn.stupidtable.default_sort_fns,a),f=function(a,b,c){var d,e,f,g,h,i,j,k;if(f=[],e=0,c)for(d=h=j=a.length-1;h>=0;d=h+=-1)f.push(d);else for(g=a.slice(0).sort(b),d=i=0,k=a.length-1;k>=0?k>=i:i>=k;d=k>=0?++i:--i){for(e=$.inArray(a[d],g);-1!==$.inArray(e,f);)e++;f.push(e)}return f},c=function(a,b){var c,d,e,f,g;for(c=a.slice(0),e=0,d=f=0,g=b.length-1;g>=0?g>=f:f>=g;d=g>=0?++f:--f)e=b[d],c[e]=a[d];return c},g=function(d){var e,g,h,i,j,k;return j=b.children("tbody").children("tr"),e=d,i=0,g=$.fn.stupidtable.dir,b.find("th").slice(0,e.index()).each(function(){var a;return a=$(this).attr("colspan")||1,i+=parseInt(a,10)}),h=e.data("sort-dir")===g.ASC?g.DESC:g.ASC,k=h===g.DESC?e.data("sort-desc")||e.data("sort")||null:e.data("sort")||null,null!==k?(b.trigger("beforetablesort",{column:i,direction:h}),b.css("display"),setTimeout(function(){var d,g,l,m,n;return d=[],l=a[k],j.each(function(a,b){var c,e,f;return c=$(b).children().eq(i),f=c.data("sort-value"),e="undefined"!=typeof f?f:c.text(),d.push(e)}),g=!!e.data("sort-dir")&&!e.data("sort-desc"),n=f(d,l,g),b.find("th").data("sort-dir",null).removeClass("sorting-desc sorting-asc"),e.data("sort-dir",h).addClass("sorting-"+h),m=$(c(j,n)),b.children("tbody").append(m),b.trigger("aftertablesort",{column:i,direction:h}),b.css("display")},10)):void 0},b.on("click","th",function(){return g($(this))}),e&&1===e.length?g(e):void 0})},$.fn.stupidtable.dir={ASC:"asc",DESC:"desc"},$.fn.stupidtable.default_sort_fns={"int":function(a,b){return parseInt(a,10)-parseInt(b,10)},"float":function(a,b){return parseFloat(a)-parseFloat(b)},string:function(a,b){return b>a?-1:a>b?1:0},"string-ins":function(a,b){return a=a.toLowerCase(),b=b.toLowerCase(),b>a?-1:a>b?1:0}}})}).call(this);